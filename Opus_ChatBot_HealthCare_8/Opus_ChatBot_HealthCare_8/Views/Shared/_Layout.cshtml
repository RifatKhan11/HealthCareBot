@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@using Opus_ChatBot_HealthCare_8.Services.IServices
@inject IBotService botService

@{
    var username = User.Identity.Name;

    var chatbotInfo = await botService.GetBotInfoByUserName("evercare");
}
<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="shortcut icon" type="image/x-icon" href="~/TotaIcon.ico" />
    <title>@ViewData["Title"] - Tota</title>

    <!-- Bootstrap core CSS-->
    <link href="~/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- SweetAlert CSS-->
    <link href="~/SweetAlert/sweetalert2.css" rel="stylesheet" />

    <!-- Custom fonts for this template-->
    <link href="~/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">

    <!-- Page level plugin CSS-->
    <link href="~/vendor/datatables/dataTables.bootstrap4.css" rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="~/css/sb-admin.css" rel="stylesheet">
    
    <link rel="stylesheet" href="~/select2/select2.min.css">
    <style>
        .no-js #loader {
            display: none;
        }

        .js #loader {
            display: block;
            position: absolute;
            left: 100px;
            top: 0;
        }

        .se-pre-con {
            position: fixed;
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
            z-index: 9999;
            background: url(/images/loader-64x/Preloader_2.gif) center no-repeat #fff;
        }

        ul li a{
            color: black;
        }
        .fa-bars{
            color: black;
        }
    </style>
    @RenderSection("Style", required: false)
    <link href="~/css/d3custom.css" rel="stylesheet" />

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

</head>

<body id="page-top">
    <div class="se-pre-con"></div>
    <nav class="navbar navbar-expand static-top" style="background-color: #e7f0f9; color: black;">
        <input type="hidden" value="" id="universalBotKey" />
        <a class="navbar-brand mr-1" asp-area="" asp-controller="Home" asp-action="Index"><img src="/chatbox/@chatbotInfo.BotLogo" alt="Tota bot" style="height: 50px; width: auto" /></a>

        <button class="btn btn-link btn-sm text-white order-1 order-sm-0" id="sidebarToggle" href="#" style="padding-top:15px">
            <i class="fas fa-bars"></i>
        </button>

        <!-- Navbar Search -->
        <form class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0"></form>

        <!-- Navbar -->
        <ul class="navbar-nav ml-auto ml-md-0">
            <li class="nav-item dropdown no-arrow">
                <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown"
                   aria-haspopup="true" aria-expanded="false" style="padding-top:15px">
                    @if (SignInManager.IsSignedIn(User))
                    {
                        @UserManager.GetUserName(User)
                    }
                    else
                    {
                        <i class="fas fa-user-circle fa-fw"></i>
                    }

                </a>

                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                    @if (SignInManager.IsSignedIn(User))
                    {
                        <a class="dropdown-item" href="#">User Profile</a>
                        <div class="dropdown-divider"></div>
                        <form asp-area="" asp-controller="Account" asp-action="Logout" method="post" id="logoutForm" class="navbar-right">
                            <button type="submit" class="btn btn-link navbar-btn navbar-link">Log out</button>
                        </form>
                    }
                    else
                    {
                        <a class="dropdown-item" asp-area="" asp-controller="Account" asp-action="Login">Login</a>
                    }

                </div>
            </li>
        </ul>
    </nav>

    @*<partial name="_CookieConsentPartial" />*@

    <div id="wrapper">

        <!-- Sidebar -->
        <ul class="sidebar navbar-nav">
            <li class="nav-item active">
                <a class="nav-link" asp-area="" asp-controller="Home" asp-action="Dashboard">
                    <i class="fas fa-fw fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
            </li>
             <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="Appointment" asp-action="Queries">
                    <i class="fas fa-fw fa-comments"></i>
                    <span>Pending Queries</span>
                </a>
            </li>
             <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="Appointment" asp-action="RepliedQuery">
                    <i class="fas fa-fw fa-comments"></i>
                    <span>Replied Queries</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="Appointment" asp-action="Feedback">
                    <i class="fas fa-fw fa-comments"></i>
                    <span>Pending Feedback</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="Appointment" asp-action="RepliedFeedback">
                    <i class="fas fa-fw fa-comments"></i>
                    <span>Replied Feedback</span>
                </a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="/Appointment/Index">
                    <i class="fas fa-fw fa-comments"></i>
                    <span>Appointment List</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/Appointment/DoctorTimeSlot">
                    <i class="fas fa-fw fa-comments"></i>
                    <span>Doctor Time Slot</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/Home/ApiAllDataList">
                    <i class="fas fa-fw fa-comments"></i>
                    <span>Api Data</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/Home/ApiToken">
                    <i class="fas fa-fw fa-comments"></i>
                    <span>Api Token</span>
                </a>
            </li>
             <li class="nav-item">
                <a class="nav-link" href="/Home/ApiActivityLog">
                    <i class="fas fa-fw fa-comments"></i>
                    <span>Api Activity Log</span>
                </a>
            </li>
            @*<li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="Menu" asp-action="Index">
                    <i class="fas fa-fw fa-chart-bar"></i>
                    <span>Menu</span>
                </a>
            </li>
           
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="QuestionReplay" asp-action="Create">
                    <i class="fa fa-fw fa-question"></i>
                    <span>Add Question & Reply</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="QuestionReplay" asp-action="Index">
                    <i class="fas fa-question-circle"></i>
                    <span>All Question & Reply</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="File" asp-action="Index">
                    <i class="fas fa-file"></i>
                    <span>Files</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="Knowledge" asp-action="Index">
                    <i class="fas fa-info"></i>
                    <span>Knowledge</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="Appointment" asp-action="Index">
                    <i class="fas fa-list"></i>
                    <span>Appointment List</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="DoctorInfo" asp-action="DepartmentUpload">
                    <i class="fas fa-heartbeat"></i>
                    <span>Department</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="DoctorInfo" asp-action="DoctorSpecialization">
                    <i class="fas fa-heartbeat"></i>
                    <span>Doctor-Specialization</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="DoctorInfo" asp-action="DoctorListUpload">
                    <i class="fas fa-heartbeat"></i>
                    <span>Doctor List</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="DoctorInfo" asp-action="DoctorListUpload">
                    <i class="fas fa-heartbeat"></i>
                    <span>Doctor List Upload</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="MasterData" asp-action="IndexOperator">
                    <i class="fas fa-info"></i>
                    <span>Operator</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="MasterData" asp-action="IndexGrettingFirst">
                    <i class="fas fa-info"></i>
                    <span>First Greetings</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="MasterData" asp-action="IndexGretting">
                    <i class="fas fa-info"></i>
                    <span>Last Greetings</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="MasterData" asp-action="ComplainList">
                    <i class="fas fa-info"></i>
                    <span>Complaint List</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="MasterData" asp-action="SuggestionList">
                    <i class="fas fa-info"></i>
                    <span>Suggestion List</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="Account" asp-action="Register">
                    <i class="fas fa-info"></i>
                    <span>Create Bot</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="Account" asp-action="AllBots">
                    <i class="fas fa-info"></i>
                    <span>All Bots</span>
                </a>
            </li>*@


        </ul>

        <div id="content-wrapper">

            <div class="container-fluid body-content">
                @RenderBody()

            </div>
            <!-- /.container-fluid -->
            <!-- Sticky Footer -->
            <footer class="sticky-footer">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright © <i>Opus Technologies Ltd</i> 2018</span>
                    </div>
                </div>
            </footer>

        </div>
        <!-- /.content-wrapper -->
    </div>
    <!-- /#wrapper -->
    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Bootstrap core JavaScript-->
    <script src="~/vendor/jquery/jquery.min.js"></script>
    <script src="~/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="~/vendor/jquery-easing/jquery.easing.min.js"></script>
    <script type="text/javascript" src="~/js/common.js"></script>
    <!-- Page level plugin JavaScript-->
    <script src="~/vendor/chart.js/Chart.min.js"></script>
    <script src="~/vendor/datatables/jquery.dataTables.js"></script>
    <script src="~/vendor/datatables/dataTables.bootstrap4.js"></script>

    <!-- Popper Js CDN -->
    <script src="https://unpkg.com/popper.js@1.14.5/dist/umd/popper.min.js"></script>
    <!-- Bootstrap Confirmation-->
    <script src="~/vendor/bootstrap-confirmation/bootstrap-confirmation.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="~/js/sb-admin.min.js"></script>

    <!-- Sweet Alert Package -->
    @*<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>*@

    <script src="~/SweetAlert/sweetalert2.common.js"></script>
    <script src="~/SweetAlert/sweetalert2.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

    <script src="https://use.fontawesome.com/5dfc29e1bc.js"></script>

    <!-- Demo scripts for this page-->

    <script>
        $(window).on('load', function () {
            // Animate loader off screen
            $(".se-pre-con").fadeOut("slow");;
        });
        $(document).ready(function () {
           // $("#chatbot-chat").css({ "height": "100px", "width": "100px" });
            // $("#chatbot-chat").css({ "height": "700px", "width": "410px" });
           // alert($("#chatbot-chat").text());




            $("#chatbot-chat").hide();
            $("#btnclose").hide();
            var BaseUrl = "";
            var ip = location.host;
            //if (ip == 'localhost:23997') {
            //    BaseUrl = 'http://localhost:23997/CustoomChatBox/MyChatbot?botKey=' + '@chatbotInfo.botKey';
            //}
            //else {
            //    BaseUrl = 'http://115.127.99.113:239/CustoomChatBox/MyChatbot?botKey=' + '@chatbotInfo.botKey';
            //}
            var i = 0;
            $("#test").click(function () {

                if (i % 2 == 0) {
                    $('#chatbot-chat-frame').prop('src', BaseUrl);
                    $("#chatbot-chat").show();
                    $("#btnclose").show();
                } else {
                    $('#chatbot-chat-frame').removeAttr('src');
                    $("#chatbot-chat").hide();
                    $("#btnclose").hide();
                }
                i++;
            });

            // $("#btnclose").click(function () {
            //     window.location.reload();
            //     $("#btnclose").hide();
            // });

           
        });
    </script>



    <script src="~/chatbox/cookie.js"></script>
    <script src="~/select2/select2.min.js"></script>

    



    @RenderSection("Scripts", required: false)

</body>

</html>